# Destruct
As in "This message will self-destruct." Use Hashicorp Vault to share secrets that are destroyed after being accessed by a one-time password.

## Why
Despite the many features of Hashicorp Vault, there are still times when secrets (passwords, keys, etc.) need to be generated by one person/entity and shared with another. This often leads to sensitive data being shared and stored long-term via insecure methods/systems (email, chat, sticky notes, etc.).

This tool aims to share secrets so that shared secrets are:

* Stored in a secure system (currently a pre-existing Hashicorp Vault environment)
* Only accessible via a single-use token
* Deleted from the secure system after being accessed once

## Usage
```
NAME:
   destruct - Store or access Vault secrets that will auto-delete after being accessed.

USAGE:
   destruct [global options] command [command options] [arguments...]

VERSION:
   1.0.0

COMMANDS:
   store, s     Store secrets
   retrieve, r  Retrieve secrets
   help, h      Shows a list of commands or help for one command

GLOBAL OPTIONS:
   --help, -h     show help
   --version, -v  print the version
```

### Store
#### Vault Token Requirements
`destruct store` requires that the user has obtained a Vault token which is passed into `destruct store` by cli flag, the `$VAULT_TOKEN` environment variable, or stored in `"~/.vault-token". If already using Vault's CLI tool, `vault login` (<link>https://www.vaultproject.io/docs/commands/login.html) saves the resulting Vault token in `~/.vault-token`.

The Vault token must have an attached Vault policy that allows `update` access to `/sys/wrapping/unwrap`, which should be provided by the default Vault policy.

#### Vault Address
A remote Vault address can be passed into Destruct by cli flag or set as the `$VAULT_ADDR` environment variable.

#### Command
```
NAME:
   destruct store - Store secrets

USAGE:
   destruct store [command options] secrets

OPTIONS:
   --vault-addr value, -a value  Vault service hostname/IP and port (default: "https://127.0.0.1:8200") [$VAULT_ADDR]
   --token value, -t value       Vault token with access to create self-destructing token [$VAULT_TOKEN] [token help file]
   --insecure, -k                Allow invalid SSL cert on Vault service
```

Example:
```
destruct store --vault-addr "http://127.0.0.1:1234" "some secrets"
s.GH6YnEqETnF0CcBXeQ5IUfqF
```

### Retrieve

#### Command
```
NAME:
   destruct retrieve - Retrieve secrets

USAGE:
   destruct retrieve [command options] token

OPTIONS:
   --vault-addr value, -a value  Vault service hostname/IP and port (default: "https://127.0.0.1:8200") [$VAULT_ADDR]
   --insecure, -k                Allow invalid SSL cert on Vault service
```

Example:
```
destruct retrieve s.GH6YnEqETnF0CcBXeQ5IUfqF
map[destruct:some secrets]
```

#### Curl
```

```
